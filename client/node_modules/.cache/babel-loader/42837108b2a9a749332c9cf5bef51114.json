{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/rbm/client/src/pages/resetForgottenPassword.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Header from '../component/layout/header';\nimport PageHeader from '../component/layout/pageheader';\nimport FooterSection from '../component/layout/footer';\nimport { HttpRequest } from '../services/serverHttpRequest.ts';\nimport { checkUserPassword, checkMatchPassword } from '../utilities/validation.ts';\nimport { messageBox } from '../utilities/message.ts';\nimport { RESET_USER_PASSWORD, CHECK_PASSWORD_LINK_EXPIRY } from '../api/index.ts';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst title = \"Password reset\";\n\nconst SendResetLink = () => {\n  _s();\n\n  const [hide, setHide] = useState(false);\n  const [regPassword, setRegPassword] = useState('');\n  const [regConPassword, setRegConPassword] = useState('');\n  const params = useParams();\n  useEffect(() => {\n    async function checkIfExpired() {\n      const response = await HttpRequest.server(CHECK_PASSWORD_LINK_EXPIRY, 'POST', {\n        token: params.token\n      });\n\n      if (response.code == 401) {\n        setHide(true);\n      }\n    }\n\n    checkIfExpired();\n  }, [hide]);\n\n  function handleChange(e) {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    switch (name) {\n      case 'password':\n        if (checkUserPassword(value)) {\n          setRegPassword(value);\n          messageBox(\".passwordError\", \"none\", \"red\", \"\");\n        } else {\n          messageBox(\".passwordError\", \"block\", \"red\", \"Password must be more than 10 characters, including one lowercase, one uppercase letter & numeric value\");\n        }\n\n        break;\n\n      case 'conpassword':\n        if (checkMatchPassword(value, regPassword)) {\n          setRegConPassword(value);\n          messageBox(\".confirmedPasswordError\", \"block\", \"red\", \"Not match between passwords\");\n        } else {\n          messageBox(\".confirmedPasswordError\", \"block\", \"green\", \"Pasword Matches\");\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (regPassword !== \"\" && regConPassword !== \"\") {\n      const response = await HttpRequest.server(RESET_USER_PASSWORD, \"POST\", {\n        token: params.token,\n        regConPassword: regConPassword\n      });\n\n      if (response.code == 200) {\n        messageBox(\".regFormError\", \"block\", \"green\", \"Your password has been reset. Login to your account with your new credentials\");\n      }\n    } else {\n      messageBox(\".regFormError\", \"block\", \"red\", \"All (*) fields are required\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: 'Password reset'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 18\n    }, this), !hide ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-section padding-tb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"title\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"account-form\",\n            id: \"forgetPassword\",\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"regFormError\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                id: \"password\",\n                onChange: handleChange,\n                placeholder: \"Password *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"passwordError\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"conpassword\",\n                id: \"conpassword\",\n                onChange: handleChange,\n                placeholder: \"Confirm Password *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"confirmedPasswordError\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 38\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"d-block lab-btn\",\n                type: \"submit\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Save new password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 92\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 26\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Link expired\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 14\n  }, this);\n};\n\n_s(SendResetLink, \"byyXmoS502q7zc62Rn4biRMMp5E=\", false, function () {\n  return [useParams];\n});\n\n_c = SendResetLink;\nexport default SendResetLink;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendResetLink\");","map":{"version":3,"names":["useEffect","useState","Header","PageHeader","FooterSection","HttpRequest","checkUserPassword","checkMatchPassword","messageBox","RESET_USER_PASSWORD","CHECK_PASSWORD_LINK_EXPIRY","useParams","title","SendResetLink","hide","setHide","regPassword","setRegPassword","regConPassword","setRegConPassword","params","checkIfExpired","response","server","token","code","handleChange","e","name","target","value","handleSubmit","preventDefault"],"sources":["/Applications/MAMP/htdocs/rbm/client/src/pages/resetForgottenPassword.jsx"],"sourcesContent":["import {useEffect, useState } from 'react';\r\nimport Header from '../component/layout/header';\r\nimport PageHeader from '../component/layout/pageheader';\r\nimport FooterSection from '../component/layout/footer';\r\nimport { HttpRequest } from '../services/serverHttpRequest.ts';\r\nimport {checkUserPassword, checkMatchPassword } from '../utilities/validation.ts';\r\nimport { messageBox } from '../utilities/message.ts';\r\nimport { RESET_USER_PASSWORD,CHECK_PASSWORD_LINK_EXPIRY } from '../api/index.ts';\r\nimport { useParams } from 'react-router-dom';\r\nconst title = \"Password reset\";\r\n\r\nconst SendResetLink = () => {\r\n     const [hide, setHide] = useState(false);\r\n     const [regPassword, setRegPassword] = useState('')\r\n     const [regConPassword, setRegConPassword] = useState('')\r\n     const params = useParams();\r\n\r\n    useEffect(() => {\r\n        async function checkIfExpired(){\r\n            const response = await HttpRequest.server(CHECK_PASSWORD_LINK_EXPIRY, 'POST', {token:params.token});\r\n            if(response.code == 401){\r\n                setHide(true)\r\n            }  \r\n        }\r\n         checkIfExpired()\r\n     }, [hide]);\r\n   \r\n    function handleChange(e) {\r\n         const name = e.target.name;\r\n         const value = e.target.value;\r\n         switch (name) {\r\n             case 'password':\r\n                 if(checkUserPassword(value)){setRegPassword(value); messageBox(\".passwordError\", \"none\", \"red\", \"\");} else { messageBox(\".passwordError\", \"block\", \"red\", \"Password must be more than 10 characters, including one lowercase, one uppercase letter & numeric value\");}\r\n                 break;\r\n             case 'conpassword':\r\n                 if(checkMatchPassword(value, regPassword)){ setRegConPassword(value); messageBox(\".confirmedPasswordError\", \"block\", \"red\", \"Not match between passwords\"); } else { messageBox(\".confirmedPasswordError\", \"block\", \"green\", \"Pasword Matches\");}\r\n                 break;\r\n             default:\r\n                 break;\r\n         }\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n         e.preventDefault();\r\n         if(regPassword !== \"\" && regConPassword !== \"\"){\r\n                 const response = await HttpRequest.server(RESET_USER_PASSWORD, \"POST\", {token:params.token, regConPassword:regConPassword })\r\n                 if(response.code == 200){\r\n                     messageBox(\".regFormError\", \"block\", \"green\", \"Your password has been reset. Login to your account with your new credentials\");\r\n                 }\r\n         }\r\n         else{\r\n             messageBox(\".regFormError\", \"block\", \"red\", \"All (*) fields are required\");\r\n         }\r\n    }\r\n\r\n         return (\r\n             <div>\r\n                 <PageHeader title={'Password reset'} />\r\n                 {\r\n                     (!hide) ? (\r\n                         <div className=\"login-section padding-tb\">\r\n                         <div className=\" container\">\r\n                             <div className=\"account-wrapper\">\r\n                                 <h3 className=\"title\">{title}</h3>\r\n                                 <form className=\"account-form\" id='forgetPassword' onSubmit={handleSubmit} >\r\n                                 <span className='regFormError'></span>\r\n                                 <div className=\"form-group\">\r\n                                     <input\r\n                                         type=\"password\"\r\n                                         name=\"password\"\r\n                                         id=\"password\"\r\n                                         onChange={handleChange}\r\n                                         placeholder=\"Password *\"\r\n                                     />\r\n                                     <span className='passwordError'></span>\r\n    \r\n                                 </div>\r\n                                 <div className=\"form-group\">\r\n                                     <input\r\n                                         type=\"password\"\r\n                                         name=\"conpassword\"\r\n                                         id=\"conpassword\"\r\n                                         onChange={handleChange}\r\n                                         placeholder=\"Confirm Password *\"\r\n                                     />\r\n                                     <span className='confirmedPasswordError'></span>\r\n                                 </div>\r\n                                 \r\n                          \r\n                                     <div className=\"form-group\">\r\n                                         <button className=\"d-block lab-btn\" type=\"submit\"><span>Save new password</span></button>\r\n                                     </div>\r\n                                 </form>\r\n                              \r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                     ) :\r\n                     (\r\n                         <div>\r\n                             Link expired\r\n                         </div>\r\n                     )\r\n                 }\r\n             \r\n           \r\n             </div>\r\n         );\r\n}\r\n\r\nexport default SendResetLink;"],"mappings":"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"},"metadata":{},"sourceType":"module"}